#+TITLE:       React-Nativeå…¥é—¨æ•™ç¨‹
#+AUTHOR:      Pinvon
#+EMAIL:       pinvon@Inspiron
#+DATE:        2018-04-02 ä¸€
#+URI:         /blog/%y/%m/%d/react-nativeå…¥é—¨æ•™ç¨‹
#+KEYWORDS:    <TODO: insert your keywords here>
#+TAGS:        ReactNative
#+LANGUAGE:    en
#+OPTIONS:     H:3 num:nil toc:t \n:nil ::t |:t ^:nil -:nil f:t *:t <:t
#+DESCRIPTION: <TODO: insert your description here>

* props(å±æ€§)

å¤§éƒ¨åˆ†ç»„ä»¶åœ¨åˆ›å»ºçš„æ—¶å€™, å°±å¯ä»¥ä½¿ç”¨å„ç§å‚æ•°æ¥è¿›è¡Œå®šåˆ¶. è¿™äº›å‚æ•°å°±ç§°ä¸º =props=.

ä¾‹å¦‚, åœ¨åˆ›å»ºå›¾ç‰‡æ—¶:
#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { Image } from 'react-native';

export default class Bananas extends Component {
  render() {
    let pic = {
      uri: 'https://upload.wikimedia.org/wikipedia/commons/d/de/Bananavarieties.jpg'
    };
    return (
      <Image source={pic} style={{width: 193, height: 110}} />
    );
  }
}
#+END_SRC
è¿™è¾¹, ä½¿ç”¨åä¸º =source= çš„propsæ¥æŒ‡å®šå›¾ç‰‡çš„åœ°å€, ä½¿ç”¨åä¸º =style= çš„propsæ¥æ§åˆ¶å°ºå¯¸.

* state(çŠ¶æ€)

=props= ä¸€æ—¦è¢«æŒ‡å®š, åœ¨è¯¥ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­å°±ä¸å†æ”¹å˜. å¦‚æœæœ‰ç»„ä»¶ç»§ç»­äº†è¯¥ç»„ä»¶, åˆ™å¯ä»¥åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨ =state= æ¥æ”¹å˜.

ä¸€èˆ¬åšæ³•: å­ç»„ä»¶åœ¨ =constructor()= ä¸­åˆå§‹åŒ– =state=, åœ¨éœ€è¦ä¿®æ”¹æ—¶ä½¿ç”¨ =setState()=.

å¦‚: è¦åˆ¶ä½œä¸€æ®µé—ªçƒçš„æ–‡å­—. æ–‡å­—å†…å®¹åœ¨ç»„ä»¶åˆ›å»ºæ—¶è¢«æŒ‡å®š, æ‰€ä»¥æ–‡å­—å†…å®¹åº”è¯¥æ˜¯ä¸€ä¸ª =prop=, è€Œæ–‡å­—çš„æ˜¾ç¤ºæˆ–éšè—çŠ¶æ€(å¿«é€Ÿæ˜¾éšåˆ‡æ¢å¯äº§ç”Ÿé—ªçƒæ•ˆæœ)æ˜¯éšæ—¶é—´å˜åŒ–çš„, å› æ­¤è¿™ä¸ªçŠ¶æ€åº”è¯¥å†™åˆ° =state= ä¸­.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { Text, View } from 'react-native';
class Blink extends Component {
    constructor(props) {
        super(props);
        this.state = { showText: true };

        // æ¯1så¯¹showTextçŠ¶æ€å–å
        setInterval(() => {
            this.setState(previousState => {
                return { showText: !previousState.showText };
            });
        }, 1000);
    }
    render () {
        // æ ¹æ®showTextçš„å€¼æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºtextå†…å®¹
        let display = this.state.showText ? this.props.text : ' ';
        return (
                <Text>{display}</Text>
        );
    }
}
export default class BlinkApp extends Component {
  render() {
    return (
      <View>
        <Blink text='I love to blink' />
        <Blink text='Yes blinking is so great' />
        <Blink text='Why did they ever take this out of HTML' />
        <Blink text='Look at me look at me look at me' />
      </View>
    );
  }
}
#+END_SRC

è¿™åªæ˜¯ç¤ºä¾‹. =state= ä½¿ç”¨çš„å…¸å‹åœºæ™¯æ˜¯åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ–°æ•°æ®, æˆ–åœ¨ç”¨æˆ·è¾“å…¥æ•°æ®ä¹‹å.

* style(æ ·å¼)

æ‰€æœ‰æ ¸å¿ƒç»„ä»¶éƒ½æ¥å—åä¸º =style= çš„å±æ€§.

åœ¨å®é™…å¼€å‘çš„æ—¶å€™, æ ·å¼ä¼šå¾ˆå¤æ‚. å»ºè®®ä½¿ç”¨ =StyleSheet.create= æ¥é›†ä¸­å®šä¹‰ç»„ä»¶çš„æ ·å¼. å¦‚:

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { AppRegistry, StyleSheet, Text, View } from 'react-native';

export default class LotsOfStyles extends Component {
  render() {
    return (
      <View>
        <Text style={styles.red}>just red</Text>
        <Text style={styles.bigblue}>just bigblue</Text>
        <Text style={[styles.bigblue, styles.red]}>bigblue, then red</Text>
        <Text style={[styles.red, styles.bigblue]}>red, then bigblue</Text>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  bigblue: {
    color: 'blue',
    fontWeight: 'bold',
    fontSize: 30,
  },
  red: {
    color: 'red',
  },
});

AppRegistry.registerComponent('LotsOfStyles', () => LotsOfStyles);
#+END_SRC

* é«˜åº¦ä¸å®½åº¦

** æŒ‡å®šå®½é«˜

ç»„ä»¶çš„é«˜åº¦ä¸å®½åº¦å†³å®šäº†å®ƒåœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å°ºå¯¸. ç»™ç»„ä»¶è®¾å®šå°ºå¯¸çš„æ–¹å¼æ˜¯åœ¨æ ·å¼ä¸­æŒ‡å®š =width= å’Œ =height=. React Nativeä¸­å°ºå¯¸æ²¡æœ‰å•ä½, è¡¨ç¤ºçš„æ˜¯ä¸è®¾å¤‡åƒç´ å¯†åº¦æ— å…³çš„é€»è¾‘åƒç´ ç‚¹.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

class FixedDimensionsBasics extends Component {
  render() {
    return (
      <View>
        <View style={{width: 50, height: 50, backgroundColor: 'powderblue'}} />
        <View style={{width: 100, height: 100, backgroundColor: 'skyblue'}} />
        <View style={{width: 150, height: 150, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
};
// æ³¨å†Œåº”ç”¨(registerComponent)åæ‰èƒ½æ­£ç¡®æ¸²æŸ“
// æ³¨æ„ï¼šåªæŠŠåº”ç”¨ä½œä¸ºä¸€ä¸ªæ•´ä½“æ³¨å†Œä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯ä¸ªç»„ä»¶/æ¨¡å—éƒ½æ³¨å†Œ
AppRegistry.registerComponent('AwesomeProject', () => FixedDimensionsBasics);
#+END_SRC

** å¼¹æ€§å®½é«˜(flex)

=flex= è¡¨ç¤ºåœ¨å¯åˆ©ç”¨çš„ç©ºé—´ä¸­åŠ¨æ€æ‰©å¼ æˆ–æ”¶ç¼©. ä¸€èˆ¬ä¼šä½¿ç”¨ =flex:1= æ¥æŒ‡å®šæŸä¸ªç»„ä»¶æ‰©å¼ ä»¥æ’‘æ»¡æ‰€æœ‰å‰©ä½™çš„ç©ºé—´.

å¦‚æœæœ‰å¤šä¸ªå¹¶åˆ—çš„å­ç»„ä»¶ä½¿ç”¨äº† =flex:1=, åˆ™è¿™äº›å­ç»„ä»¶ä¼šå¹³åˆ†çˆ¶å®¹å™¨ä¸­çš„å‰©ä½™ç©ºé—´.

ç»„ä»¶èƒ½æ’‘æ»¡å‰©ä½™ç©ºé—´çš„å‰ææ˜¯å…¶çˆ¶å®¹å™¨çš„å°ºå¯¸ä¸ä¸º0. å¦‚æœçˆ¶å®¹å™¨æ—¢æ²¡æœ‰å›ºå®šçš„ =width= å’Œ =height=, ä¹Ÿæ²¡æœ‰è®¾å®š =flex=, åˆ™çˆ¶å®¹å™¨çš„å°ºå¯¸ä¸º0. è¿™æ ·çš„è¯, å³ä½¿å­ç»„ä»¶ä½¿ç”¨äº† =flex= ä¹Ÿä¸ä¼šèµ·æ•ˆæœ.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

class FlexDimensionsBasics extends Component {
  render() {
    return (
      // è¯•è¯•å»æ‰çˆ¶Viewä¸­çš„`flex: 1`ã€‚
      // åˆ™çˆ¶Viewä¸å†å…·æœ‰å°ºå¯¸ï¼Œå› æ­¤å­ç»„ä»¶ä¹Ÿæ— æ³•å†æ’‘å¼€ã€‚
      // ç„¶åå†ç”¨`height: 300`æ¥ä»£æ›¿çˆ¶Viewçš„`flex: 1`è¯•è¯•çœ‹ï¼Ÿ
      <View style={{flex: 1}}>
        <View style={{flex: 1, backgroundColor: 'powderblue'}} />
        <View style={{flex: 2, backgroundColor: 'skyblue'}} />
        <View style={{flex: 3, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
};

AppRegistry.registerComponent('AwesomeProject', () => FlexDimensionsBasics);
#+END_SRC

* ä½¿ç”¨Flexboxå¸ƒå±€

åœ¨React Nativeä¸­, ä½¿ç”¨flexboxè§„åˆ™æ¥æŒ‡å®šæŸä¸ªç»„ä»¶çš„å­å…ƒç´ çš„å¸ƒå±€. flexboxå¯ä»¥åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸Šæä¾›ä¸€è‡´çš„å¸ƒå±€ç»“æ„.

** flexDirection

åœ¨ç»„ä»¶çš„ =style= ä¸­æŒ‡å®š =flexDirection= å¯ä»¥å†³å®šå¸ƒå±€çš„ä¸»è½´. å­å…ƒç´ å¯ä»¥æ²¿ç€æ°´å¹³æ’åˆ—(row), ä¹Ÿå¯ä»¥å‚ç›´æ’åˆ—(column), é»˜è®¤ä¸ºcolumn.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

class FlexDirectionBasics extends Component {
  render() {
    return (
      // å°è¯•æŠŠ`flexDirection`æ”¹ä¸º`column`çœ‹çœ‹
      <View style={{flex: 1, flexDirection: 'row'}}>
        <View style={{width: 50, height: 50, backgroundColor: 'powderblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'skyblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
};

AppRegistry.registerComponent('AwesomeProject', () => FlexDirectionBasics);
#+END_SRC

** justifyContent

åœ¨ç»„ä»¶ä¸­çš„ =style= ä¸­æŒ‡å®š =justifyContent= å¯ä»¥å†³å®šå­å…ƒç´ æ²¿ç€ä¸»è½´çš„æ’åˆ—æ–¹å¼. å¦‚, å·¦å¯¹é½, å³å¯¹é½, è¿˜æ˜¯å±…ä¸­, ç­‰ç­‰, éƒ½æ˜¯ç”±å®ƒæ¥æŒ‡å®š.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

class JustifyContentBasics extends Component {
  render() {
    return (
      // å°è¯•æŠŠ`justifyContent`æ”¹ä¸º`center`çœ‹çœ‹
      // å°è¯•æŠŠ`flexDirection`æ”¹ä¸º`row`çœ‹çœ‹
      <View style={{
        flex: 1,
        flexDirection: 'column',
        justifyContent: 'space-between',
      }}>
        <View style={{width: 50, height: 50, backgroundColor: 'powderblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'skyblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
};

AppRegistry.registerComponent('AwesomeProject', () => JustifyContentBasics);
#+END_SRC

** alignItems

åœ¨ç»„ä»¶çš„ =style= ä¸­æŒ‡å®š =alignItems= å¯ä»¥å†³å®šå…¶å­å…ƒç´ æ²¿ç€æ¬¡è½´çš„æ’åˆ—æ–¹å¼.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

class AlignItemsBasics extends Component {
  render() {
    return (
      // å°è¯•æŠŠ`alignItems`æ”¹ä¸º`flex-start`çœ‹çœ‹
      // å°è¯•æŠŠ`justifyContent`æ”¹ä¸º`flex-end`çœ‹çœ‹
      // å°è¯•æŠŠ`flexDirection`æ”¹ä¸º`row`çœ‹çœ‹
      <View style={{
        flex: 1,
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
      }}>
        <View style={{width: 50, height: 50, backgroundColor: 'powderblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'skyblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
};

AppRegistry.registerComponent('AwesomeProject', () => AlignItemsBasics);
#+END_SRC

* å¤„ç†æ–‡æœ¬è¾“å…¥

=TextInput= æ˜¯ä¸€ä¸ªå…è®¸ç”¨æˆ·è¾“å…¥æ–‡æœ¬çš„åŸºç¡€ç»„ä»¶. å®ƒæœ‰ä¸€ä¸ªåä¸º =onChangeText= å±æ€§, æ­¤å±æ€§æ¥å—ä¸€ä¸ªå‡½æ•°, è€Œæ­¤å‡½æ•°ä¼šåœ¨æ–‡æœ¬å˜åŒ–æ—¶è¢«è°ƒç”¨; æœ‰ä¸€ä¸ªåä¸º =onSubmitEditing= çš„å±æ€§, åœ¨æ–‡ä»¶è¢«æäº¤åè¢«è°ƒç”¨.

æŠŠè¾“å…¥çš„å•è¯è½¬æ¢æˆğŸ•:
#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { AppRegistry, Text, TextInput, View } from 'react-native';

export default class PizzaTranslator extends Component {
  constructor(props) {
    super(props);
    this.state = {text: ''};
  }

  render() {
    return (
      <View style={{padding: 10}}>
        <TextInput
          style={{height: 40}}
          placeholder="Type here to translate!"
          onChangeText={(text) => this.setState({text})}
        />
        <Text style={{padding: 10, fontSize: 42}}>
          {this.state.text.split(' ').map((word) => word && 'ğŸ•').join(' ')}
        </Text>
      </View>
    );
  }
}
#+END_SRC

* (ScrollView)æ»šåŠ¨è§†å›¾

=ScrollView= æ˜¯ä¸€ä¸ªé€šç”¨çš„å¯æ»šåŠ¨çš„å®¹å™¨, å¯ä»¥åœ¨å…¶ä¸­æ”¾å…¥å¤šä¸ªç»„ä»¶å’Œè§†å›¾, è€Œä¸”è¿™äº›ç»„ä»¶å¹¶ä¸éœ€è¦æ˜¯åŒç±»å‹çš„. =ScrollView= å¯ä»¥æ°´å¹³æˆ–è€…å‚ç›´æ»šåŠ¨.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import{ ScrollView, Image, Text, View } from 'react-native'

export default class IScrolledDownAndWhatHappenedNextShockedMe extends Component {
  render() {
      return(
        <ScrollView>
          <Text style={{fontSize:96}}>Scroll me plz</Text>
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Text style={{fontSize:96}}>If you like</Text>
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Text style={{fontSize:96}}>Scrolling down</Text>
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Text style={{fontSize:96}}>What's the best</Text>
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Text style={{fontSize:96}}>Framework around?</Text>
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Image source={require('./img/favicon.png')} />
          <Text style={{fontSize:80}}>React Native</Text>
        </ScrollView>
    );
  }
}
#+END_SRC

=ScrollView= ä¼šå°†å†…éƒ¨æ‰€æœ‰ç»„ä»¶éƒ½æ¸²æŸ“. å¦‚æœå¦‚æœè¦æ˜¾ç¤ºè¾ƒé•¿çš„æ»šåŠ¨åˆ—è¡¨, åº”è¯¥ä½¿ç”¨åŠŸèƒ½å·®ä¸å¤š, ä½†æ€§èƒ½æ›´å¥½çš„é•¿åˆ—è¡¨.

* é•¿åˆ—è¡¨

React Nativeä¸­æœ‰å‡ ä¸ªé•¿åˆ—è¡¨, ä¸€èˆ¬ä½¿ç”¨ =FlatList= æˆ– =SectionList=.

** FlatList

ç”¨äºæ˜¾ç¤ºä¸€ä¸ªå‚ç›´çš„æ»šåŠ¨åˆ—è¡¨, å†…éƒ¨å…ƒç´ æ ¼å¼ç›¸åŒ, å…ƒç´ ä¸ªæ•°å¯å¢åˆ . å®ƒä¼˜å…ˆæ¸²æŸ“å±å¹•ä¸Šå¯è§çš„å…ƒç´ .

=FlatList= æœ‰ä¸¤ä¸ªå¿…é¡»çš„å±æ€§: =data= å’Œ =renderItem=. =data= æ˜¯åˆ—è¡¨çš„æ•°æ®æº, =renderItem= åˆ™ä»æ•°æ®æºä¸­é€ä¸ªè§£ææ•°æ®, ç„¶åè¿”å›ä¸€ä¸ªè®¾å®šå¥½æ ¼å¼çš„ç»„ä»¶æ¥æ¸²æŸ“.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { FlatList, StyleSheet, Text, View } from 'react-native';

export default class FlatListBasics extends Component {
  render() {
    return (
      <View style={styles.container}>
        <FlatList
          data={[
            {key: 'Devin'},
            {key: 'Jackson'},
            {key: 'James'},
            {key: 'Joel'},
            {key: 'John'},
            {key: 'Jillian'},
            {key: 'Jimmy'},
            {key: 'Julie'},
          ]}
          renderItem={({item}) => <Text style={styles.item}>{item.key}</Text>}
        />
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
   flex: 1,
   paddingTop: 22
  },
  item: {
    padding: 10,
    fontSize: 18,
    height: 44,
  },
})
#+END_SRC

** SectionList

é€‚ç”¨äºæ¸²æŸ“ä¸€ç»„éœ€è¦åˆ†ç»„çš„æ•°æ®, ä¹Ÿè®¸è¿˜å¸¦æœ‰åˆ†ç»„æ ‡ç­¾.

#+BEGIN_SRC JavaScript
import React, { Component } from 'react';
import { SectionList, StyleSheet, Text, View } from 'react-native';

export default class SectionListBasics extends Component {
  render() {
    return (
      <View style={styles.container}>
        <SectionList
          sections={[
            {title: 'D', data: ['Devin']},
            {title: 'J', data: ['Jackson', 'James', 'Jillian', 'Jimmy', 'Joel', 'John', 'Julie']},
          ]}
          renderItem={({item}) => <Text style={styles.item}>{item}</Text>}
          renderSectionHeader={({section}) => <Text style={styles.sectionHeader}>{section.title}</Text>}
        />
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
   flex: 1,
   paddingTop: 22
  },
  sectionHeader: {
    paddingTop: 2,
    paddingLeft: 10,
    paddingRight: 10,
    paddingBottom: 2,
    fontSize: 14,
    fontWeight: 'bold',
    backgroundColor: 'rgba(247,247,247,1.0)',
  },
  item: {
    padding: 10,
    fontSize: 18,
    height: 44,
  },
})
#+END_SRC

* ç½‘ç»œ

ä¸€èˆ¬ç§»åŠ¨åº”ç”¨éƒ½è¦ä»Serverä¸­è·å–æ•°æ®. æˆ‘ä»¬å¯èƒ½è¦ç»™æŸä¸ªREST APIå‘èµ·POSTè¯·æ±‚, ä»¥æäº¤ç”¨æˆ·æ•°æ®; ä¹Ÿå¯èƒ½ä»Serverä¸Šè·å–ä¸€äº›æ•°æ®.

** fetch

å¦‚æœå­¦è¿‡ =XMLHttpRequest(ajax)=, åˆ™ =fetch= ç”¨èµ·æ¥æ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹.

*** å‘èµ·ç½‘ç»œè¯·æ±‚

ä»æŒ‡å®šåœ°å€è·å–å†…å®¹:
#+BEGIN_SRC JavaScript
fetch('https://mywebsite.com/mydata.json')
#+END_SRC

=fetch()= è¿˜æœ‰å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°, ç”¨æ¥å®šåˆ¶HTTPè¯·æ±‚ä¸€äº›å‚æ•°. å¦‚:
#+BEGIN_SRC JavaScript
fetch('https://mywebsite.com/endpoint/', {
  method: 'POST',
  headers: {
    'Accept': 'application/json',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    firstParam: 'yourValue',
    secondParam: 'yourOtherValue',
  })
})
#+END_SRC
æäº¤æ•°æ®çš„æ ¼å¼å–å†³äº =headers= ä¸­çš„ =Content-Type=. =Content-Type= æœ‰å¤šç§, å¯¹åº”çš„ =body= çš„æ ¼å¼ä¹Ÿæœ‰å¤šç§. ä½¿ç”¨å“ªç§, åå•†æ¸…æ¥šå°±å¥½. æ¯”å¦‚ç”¨ç½‘é¡µè¡¨ç¤ºçš„å½¢å¼ä¼ é€’:
#+BEGIN_SRC JavaScript
fetch('https://mywebsite.com/endpoint/', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded',
  },
  body: 'key1=value1&key2=value2'
})
#+END_SRC

** å¤„ç†æœåŠ¡å™¨çš„å“åº”æ•°æ®

#+BEGIN_SRC JavaScript
getMoviesFromApiAsync() {
    return fetch('https://facebook.github.io/react-native/movies.json')
      .then((response) => response.json())
      .then((responseJson) => {
        return responseJson.movies;
      })
      .catch((error) => {
        console.error(error);
      });
  }
#+END_SRC

è¿˜å¯ä»¥ä½¿ç”¨ES7æ ‡å‡†ä¸­çš„ =async/await= è¯­æ³•:
#+BEGIN_SRC JavaScript
// æ³¨æ„è¿™ä¸ªæ–¹æ³•å‰é¢æœ‰asyncå…³é”®å­—
  async getMoviesFromApi() {
    try {
      // æ³¨æ„è¿™é‡Œçš„awaitè¯­å¥ï¼Œå…¶æ‰€åœ¨çš„å‡½æ•°å¿…é¡»æœ‰asyncå…³é”®å­—å£°æ˜
      let response = await fetch('https://facebook.github.io/react-native/movies.json');
      let responseJson = await response.json();
      return responseJson.movies;
    } catch(error) {
      console.error(error);
    }
  }
#+END_SRC

é»˜è®¤æƒ…å†µä¸‹, iOSä¼šé˜»æ­¢æ‰€æœ‰éhttpsè¯·æ±‚. å¦‚æœéè¦ä½¿ç”¨httpåè®®, å‚è€ƒæ–‡æ¡£https://segmentfault.com/a/1190000002933776.

** AJAX

æ­¤å¤„ä¸ä»‹ç».

** WebSocket

React Nativeè¿˜æ”¯æŒ =WebSocket=.
#+BEGIN_SRC JavaScript
var ws = new WebSocket('ws://host.com/path');

ws.onopen = () => {
  // æ‰“å¼€ä¸€ä¸ªè¿æ¥

  ws.send('something'); // å‘é€ä¸€ä¸ªæ¶ˆæ¯
};

ws.onmessage = (e) => {
  // æ¥æ”¶åˆ°äº†ä¸€ä¸ªæ¶ˆæ¯
  console.log(e.data);
};

ws.onerror = (e) => {
  // å‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯
  console.log(e.message);
};

ws.onclose = (e) => {
  // è¿æ¥è¢«å…³é—­äº†
  console.log(e.code, e.reason);
};
#+END_SRC

* Navigation

React Nativeä¸­æœ‰å¤šç§å¯¼èˆªç»„ä»¶, ç¤¾åŒºä¸»æ¨ =react-navigation=.

** å®‰è£…

#+BEGIN_SRC Shell
yarn add react-navigation
#+END_SRC

** åˆ›å»ºä¸¤ä¸ªé¡µé¢

åˆ›å»ºæœ‰ä¸¤ä¸ªé¡µé¢(Mainå’ŒProfile)çš„åº”ç”¨:
#+BEGIN_SRC JavaScript
import {
  StackNavigator,
} from 'react-navigation';

const App = StackNavigator({
  Main: {screen: MainScreen},
  Profile: {screen: ProfileScreen},
});
#+END_SRC

å…¶ä¸­, æ¯ä¸ª =screen= ç»„ä»¶éƒ½å¯ä»¥å•ç‹¬è®¾ç½®å¯¼èˆªé€‰é¡¹, å¦‚å¯¼èˆªå¤´çš„æ ‡é¢˜, é¡µé¢çš„è·³è½¬ç­‰:
#+BEGIN_SRC JavaScript
class MainScreen extends React.Component {
  static navigationOptions = {
    title: 'Welcome',
  };
  render() {
    const { navigate } = this.props.navigation;
    return (
      <Button
        title="Go to Jane's profile"
        onPress={() =>
          navigate('Profile', { name: 'Jane' });
        }
      />
    );
  }
}
#+END_SRC

* é›†æˆåˆ°ç°æœ‰åŸç”Ÿåº”ç”¨

åœ¨åŸç”Ÿåº”ç”¨ç¨‹åºçš„åŸºç¡€ä¸Š, åŠ ä¸ŠReact Nativeå†™çš„å†…å®¹. å€¼å¾—å­¦ä¹ .
