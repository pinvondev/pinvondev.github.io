<!DOCTYPE html>
<html lang="en">
<head>
  <title>Go实战(三) 基本类型与运算符 - Pinvon&#39;s Blog</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="Pinvon" />
  <meta name="description" content="&lt;Add description here&gt;" />
  <meta name="keywords" content="Go" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #ds-thread #ds-reset .ds-comment-body p a {color: #ff0;}
   #ds-thread #ds-reset .ds-comment-body p a:hover {color: #0ff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" href="https://pinvondev.github.io/media/css/main.css" type="text/css"/>
  <link rel="stylesheet" href="https://pinvondev.github.io/media/css/comment.css" type="text/css"/>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="https://pinvondev.github.io/">Pinvon&#39;s Blog</a></h1>
    <p>所见, 所闻, 所思, 所想</p>
    <nav class="site-nav">
      <div class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" fill="#ffff00"/>
          <path d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" fill="#ffff00"/>
          <path d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" fill="#ffff00"/>
        </svg>
      </div>
      <ul class="trigger">
        <li><a href="https://pinvondev.github.io/years/">Years</a></li>
        <li><a href="https://pinvondev.github.io/authors/">Authors</a></li>
        <li><a href="https://pinvondev.github.io/tags/">Tags</a></li>
        <li><a href="https://pinvondev.github.io/about/">About</a></li>
        <li><a href="https://github.com/pinvondev">Github</a></li>
        <li><a href="https://pinvondev.github.io/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="pinvondev.github.io">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Go实战(三) 基本类型与运算符</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgef531bb">1. 注</a></li>
<li><a href="#orge612af3">2. 基本类型</a>
<ul>
<li><a href="#org02f1abb">2.1. 概述</a>
<ul>
<li><a href="#org0c34e4f">2.1.1. 整型</a>
<ul>
<li><a href="#org6e3a3f0">2.1.1.1. 注意</a></li>
<li><a href="#org6f5a9ef">2.1.1.2. 表示范围</a></li>
<li><a href="#org9f8b7b2">2.1.1.3. 格式化输出</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgdc0d06f">2.2. 类型转换</a></li>
<li><a href="#orgc663c2f">2.3. 习惯</a></li>
</ul>
</li>
<li><a href="#org26fb075">3. 运算符</a>
<ul>
<li><a href="#orgb5c0cea">3.1. 取模运算符</a></li>
<li><a href="#orgc575971">3.2. 溢出</a></li>
<li><a href="#orge71ca1d">3.3. 位运算符</a>
<ul>
<li><a href="#org619c333">3.3.1. 例子</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgef531bb" class="outline-2">
<h2 id="orgef531bb"><span class="section-number-2">1</span> 注</h2>
<div class="outline-text-2" id="text-1">
<p>
学习自: Go 语言圣经
</p>
</div>
</div>

<div id="outline-container-orge612af3" class="outline-2">
<h2 id="orge612af3"><span class="section-number-2">2</span> 基本类型</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org02f1abb" class="outline-3">
<h3 id="org02f1abb"><span class="section-number-3">2.1</span> 概述</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Go 语言是一种静态类型的编程语言, 所以编译器在编译时就要知道每个值的类型, 这样编译器就知道要为这个值分配多少内存, 并且知道这段分配的内存表示什么.
</p>

<p>
提前知道值的类型有很多好处, 如, 可以进一步优化代码, 提高执行效率, 等等.
</p>

<p>
Go 的基本类型包括数值型, 字符串, 布尔型.
</p>

<p>
数值型包括几种不同大小的整型数, 浮点数, 复数.
</p>
</div>

<div id="outline-container-org0c34e4f" class="outline-4">
<h4 id="org0c34e4f"><span class="section-number-4">2.1.1</span> 整型</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
Go 语言提供了有符号和无符号类型的整数运算.
</p>

<p>
int8, int16, int32, int64 是四种有符号整型; uint8, uint16, uint32, uint64 是四种无符号整型.
</p>

<p>
另外, 还有 int 和 uint. int 和 uint 的大小会根据当前机器的系统架构自动判定, 一般是 32bit 或 64bit. 
</p>

<p>
rune 类型用于表示一个 Unicode 码点, 它与 int32 等价, 名称可以互换使用.
</p>

<p>
byte 类型与 int8 类型也是等价的, 可以互换使用.
</p>

<p>
uintptr 类型用于存放指针, 它与 uint 类型的范围相同, 根据系统架构来确定.
</p>
</div>

<div id="outline-container-org6e3a3f0" class="outline-5">
<h5 id="org6e3a3f0"><span class="section-number-5">2.1.1.1</span> 注意</h5>
<div class="outline-text-5" id="text-2-1-1-1">
<p>
即使根据系统架构确定了 int 类型的大小为 32bit, 我们也不能认为 int 类型与 int32 类型相同, 在需要将 int 当作 int32 使用的地方, 需要进行显式的类型转换.
</p>
</div>
</div>

<div id="outline-container-org6f5a9ef" class="outline-5">
<h5 id="org6f5a9ef"><span class="section-number-5">2.1.1.2</span> 表示范围</h5>
<div class="outline-text-5" id="text-2-1-1-2">
<p>
对于有符号整数, 采用 2 的补码形式表示, 即最高位表示符号位, 所以表示范围为 \(-2^{n-1} ~2^{n-1}-1\)
</p>

<p>
对于无符号整数, 所有的位都用于表示非负数, 因此表示范围是 \(0 ~ 2^{n-1}\)
</p>
</div>
</div>

<div id="outline-container-org9f8b7b2" class="outline-5">
<h5 id="org9f8b7b2"><span class="section-number-5">2.1.1.3</span> 格式化输出</h5>
<div class="outline-text-5" id="text-2-1-1-3">
<p>
%d: 输出十进制数
</p>

<p>
%o: 输出八进制数
</p>

<p>
%x: 输出十六进制数
</p>

<p>
%[1]: 使用第1个操作数
</p>

<p>
%#: 输出 0, 0x 等前缀
</p>

<pre class="example">
o := 0666
fmt.Printf("%d %[1]o %#[1]o\n", o) // "438 666 0666"
x := int64(0xdeadbeef)
fmt.Printf("%d %[1]x %#[1]x %#[1]X\n", x)
// Output:
// 3735928559 deadbeef 0xdeadbeef 0XDEADBEEF
</pre>

<p>
%q: 输出带单引号的字符
</p>

<pre class="example">
ascii := 'a'
unicode := '国'
newline := '\n'
fmt.Printf("%d %[1]c %[1]q\n", ascii)   // "97 a 'a'"
fmt.Printf("%d %[1]c %[1]q\n", unicode) // "22269 国 '国'"
fmt.Printf("%d %[1]q\n", newline)       // "10 '\n'"
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdc0d06f" class="outline-3">
<h3 id="orgdc0d06f"><span class="section-number-3">2.2</span> 类型转换</h3>
<div class="outline-text-3" id="text-2-2">
<p>
在 Go 语言中, 需要显式地将一个值从一种类型转化成另一种类型. 如:
</p>
<div class="org-src-container">
<pre class="src src-Golang">var apples int32 = 1
var oranges int16 = 2
var compote int = apples + oranges
fmt.Println(compote)
</pre>
</div>
<p>
编译时将会报错. 我们可以改成:
</p>
<div class="org-src-container">
<pre class="src src-Golang">...
var compote = int(apples) + int(oranges)
...
</pre>
</div>

<p>
如果将大尺寸的数据类型转化成小尺寸的数据类型, 如将浮点数转成整数, 有可能会改变数值或丢失精度. 如:
</p>
<div class="org-src-container">
<pre class="src src-Golang">f := 3.141 // a float64
i := int(f)
fmt.Println(f, i) // "3.141 3"
f = 1.99
fmt.Println(int(f)) // "1"
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc663c2f" class="outline-3">
<h3 id="orgc663c2f"><span class="section-number-3">2.3</span> 习惯</h3>
<div class="outline-text-3" id="text-2-3">
<p>
如果没有特殊需求, 我们会倾向于使用有符号类型. 举个例子:
</p>
<div class="org-src-container">
<pre class="src src-Golang">medals := []string{"gold", "silver", "bronze"}
for i := len(medals) - 1; i &gt;= 0; i-- {
    fmt.Println(medals[i]) // "bronze", "silver", "gold"
}
</pre>
</div>

<p>
如果 len() 返回的是 uint 类型, 则 len(medals)-1 永远不会小于 0, 并且溢出时变成 uint 类型的最大值, 访问 medals[i] 时出错, 因为在试图访问一个 slice 范围以外的元素.
</p>

<p>
只有在位运算时, 才会使用无符号类型. 如 bit 集合, 分析二进制文件格式, 哈希, 加密等操作.
</p>
</div>
</div>
</div>

<div id="outline-container-org26fb075" class="outline-2">
<h2 id="org26fb075"><span class="section-number-2">3</span> 运算符</h2>
<div class="outline-text-2" id="text-3">
<p>
所有二元运算符按优先级递减的顺序(同一排的优先级相同)排列如下:
</p>
<pre class="example">
*	/	%	&lt;&lt;	&gt;&gt;	&amp;	&amp;^
+	-	|	^	+=
==	!=	&lt;	&lt;=	&gt;	&gt;=
&amp;&amp;
||
</pre>
</div>

<div id="outline-container-orgb5c0cea" class="outline-3">
<h3 id="orgb5c0cea"><span class="section-number-3">3.1</span> 取模运算符</h3>
<div class="outline-text-3" id="text-3-1">
<p>
在不同的语言中, % 运算符的行为可能不同. 在 Go 语言中, % 运算符的符号和被取模数(% 前面的数字)的符号一致. 如 -5%3 和 -5%-3 结果都是 -2.
</p>
</div>
</div>

<div id="outline-container-orgc575971" class="outline-3">
<h3 id="orgc575971"><span class="section-number-3">3.2</span> 溢出</h3>
<div class="outline-text-3" id="text-3-2">
<p>
如果运算结果需要更多位数才能表示, 就会导致溢出.
</p>

<p>
溢出时, 超出的高 bit 位部分将被丢弃. 因此, 有可能出现这种情况: 有符号类型, 超出的高位被截掉之后, 如果剩下的比特中, 最左边的是1, 最终结果就可能成了负数.
</p>
</div>
</div>

<div id="outline-container-orge71ca1d" class="outline-3">
<h3 id="orge71ca1d"><span class="section-number-3">3.3</span> 位运算符</h3>
<div class="outline-text-3" id="text-3-3">
<p>
^ 当作二元运算符时, 表示按位异或; 当作一元运算符时, 表示按位取反.
</p>
</div>

<div id="outline-container-org619c333" class="outline-4">
<h4 id="org619c333"><span class="section-number-4">3.3.1</span> 例子</h4>
<div class="outline-text-4" id="text-3-3-1">
<div class="org-src-container">
<pre class="src src-Golang">var x uint8 = 1&lt;&lt;3 | 3&lt;&lt;5
fmt.Printf("%08b", x)
</pre>
</div>
<p>
输出: 01101000
</p>

<p>
解析: x&lt;&lt;n 中, n 必须是无符号数, x 则有/无符号位都可以. 我们可以用笔来演算, 将 x 转成二进制数, 低位对齐, 然后根据 n 来确定左移的位数. 如:
</p>
<pre class="example">
3&lt;&lt;5

// 开始的位置
       11
0000 0000

// 左移 5 位后的位置
 11       
0000 0000

// 得到的数
0110 0000
</pre>

<p>
1&lt;&lt;3 | 3&lt;&lt;5: 将 1&lt;&lt;3 和 3&lt;&lt;5 的结果用或操作符运算.
</p>

<p>
Printf() 的 %b: 打印二进制格式的数字, %08b 表示至少打印 8 个字符宽度, 不足的前缀部分用 0 填充.
</p>

<p>
再看 &amp;^ 的例子:
</p>
<div class="org-src-container">
<pre class="src src-Golang">var x uint8 = 1&lt;&lt;2 | 3&lt;&lt;5
var y uint8 = 1&lt;&lt;1 | 1&lt;&lt;2
fmt.Printf("%08b\n", x)
fmt.Printf("%08b\n", y)
fmt.Printf("%08b\n", x&amp;^y)
</pre>
</div>

<p>
输出:
</p>
<pre class="example">
01100100
00000110
01100000
</pre>

<p>
可以看出, x &amp;^ y 的意思是, y 中如果某个比特位为 1, 则 x 中相应的比特位清空成 0.
</p>
</div>
</div>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2018-04-22</span>
            <span title="last modification date" class="post-info">2018-04-22</span>
            <span title="tags" class="post-info">:<a href="https://pinvondev.github.io/tags/go">Go</a>:</span>
            <span title="author" class="post-info"><a href="mailto:pinvon@Inspiron">Pinvon</a></span>
        </div>
    <script src="https://pinvondev.github.io/media/js/jquery-2.1.3.min.js"></script>
        <section>
            <h1>Comments</h1>
            <div id="comment-wrap">
                    <a class="disqus_label">使用 Disqus 评论</a>
    </ul>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
         //var disqus_developer = 1;
         var preempt_signal=false;
         var disqus_identifier = "/blog/Go/2018/04/22/go实战(三)-基本类型与运算符/ Or /blog/Go/go实战(三)-基本类型与运算符/";
         var disqus_url = "https://pinvondev.github.io/blog/Go/2018/04/22/go实战(三)-基本类型与运算符/ Or /blog/Go/go实战(三)-基本类型与运算符/";
         var disqus_shortname = 'pinvon';
         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
             $('#disqus_thread').css('display','none');
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <script>
     /* comments */
     var ego_disqus_thread=$('#disqus_thread');
     var ego_ds_label=$('.ds-thread');
     $('.disqus_label').click(function(){
         ego_disqus_thread.show();
         ego_ds_label.hide();
     });
     $('.ds-label').click(function(){
         ego_disqus_thread.hide();
         ego_ds_label.show();
     });
    </script>
        </section>
    <script src="https://pinvondev.github.io/media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:pinvon@Inspiron">Pinvon</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div></body>
</html>
