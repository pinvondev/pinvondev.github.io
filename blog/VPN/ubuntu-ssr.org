#+TITLE:       Ubuntu+VPN
#+AUTHOR:      Pinvon
#+EMAIL:       pinvon@Inspiron
#+DATE:        2018-03-05 一
#+URI:         /blog/%y/%m/%d/ubuntu+vpn
#+KEYWORDS:    <TODO: insert your keywords here>
#+TAGS:        VPN
#+LANGUAGE:    en
#+OPTIONS:     H:3 num:nil toc:t \n:nil ::t |:t ^:nil -:nil f:t *:t <:t
#+DESCRIPTION: <TODO: insert your description here>

* SSR

下载ssr: [[https://github.com/shadowsocksr-backup/shadowsocksr]]

进入配置文件, 路径为: =./shadowsocks/json/config.json=

编辑配置文件, 格式大致为: 
#+BEGIN_SRC Shell
{
    "server": "your.ip.address",
    "server_port": 1234,
    "local_address": "127.0.0.1",
    "local_port": 1080,
    "password": "password",
    "timeout": 600,
    "udp_timeout": 60,
    "method":  "chacha20",
    "protocol": "auth_sha1_v4",
    "protocol_param": "",
    "obfs": "http_simple",
    "obfs_param": "cloudflare.com",
    "dns_ipv6": false,
    "connect_verbose_info": 0,
    "redirect": "",
    "fast_open": false
}
#+END_SRC

开启与关闭, 使用如下脚本, 放在用户目录, 每次开机直接启动:
#+BEGIN_SRC Shell
#!/bin/bash
cd /usr/local/opt/ssr/shadowsocksr/shadowsocks/json/
sudo python ../local.py -c config.json -d start
# sudo python ../local.py -c config.json -d stop
#+END_SRC

* 配置浏览器

根据[[https://github.com/FelisCatus/SwitchyOmega/wiki/GFWList][说明]]进行配置.

在此之前, 可以先到 http://69.28.91.10 下载 setupVPN 插件并安装, 让 Chrome 可以科学上网. 然后再利用这个插件来下载其他插件, 如 SwitchOmega 等.

* 终端使用代理上网

通过上面的配置, 已经可以在浏览器中使用代理了. 如果要在终端中使用代理上网, 继续配置.

可以使用 =proxychains-ng= 这个工具来配置.

#+BEGIN_SRC Shell
git clone https://github.com/rofl0r/proxychains-ng.git
cd proxychains-ng
./configure
sudo make && sudo make install
cp ./src/proxychains.conf /etc/proxychains.conf
#+END_SRC

编辑 =proxychains-ng= 的配置文件.

进入文件, 跳到最后一行, 将 =socks4 127.0.0.1 9095= 注释掉, 添加如下内容:
#+BEGIN_SRC Shell
socks5 127.0.0.1 1080
#+END_SRC

需要使用代理的时候, 在命令的最前面加上 =proxychains4= 即可.

测试:
#+BEGIN_SRC Shell
proxychains4 w3m https://www.google.com
#+END_SRC

内容如下:
[[./0.png]]
