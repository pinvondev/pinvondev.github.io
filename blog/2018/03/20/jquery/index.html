<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>jQuery - Pinvon&#39;s Blog</title>
    <meta charset="utf-8" />
    <meta name="author" content="Pinvon" />
    <meta name="description" content="&lt;TODO: insert your description here&gt;" />
    <meta name="keywords" content="&lt;TODO: insert your keywords here&gt;" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">Pinvon&#39;s Blog</a></h1>
        <p>所见，所闻，所思，所想</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/pinvondev">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="//www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="pinvondev.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>jQuery</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org4342623">声明</a></li>
<li><a href="#org443ed66">概述</a></li>
<li><a href="#org6c393c3">选择器</a>
<ul>
<li><a href="#orgeb8b332">按ID查找</a></li>
<li><a href="#org3c244e0">按tag查找</a></li>
<li><a href="#org5362f7a">按class查找</a></li>
<li><a href="#org3793feb">按属性查找</a></li>
<li><a href="#orga5f8ae2">组合查找</a></li>
<li><a href="#orgf43573f">多项选择器</a></li>
<li><a href="#orga569438">层级选择器</a>
<ul>
<li><a href="#orgfa070e1">子选择器</a></li>
<li><a href="#orgbe95756">过滤器</a></li>
</ul>
</li>
<li><a href="#org64aa4c9">查找和过滤</a>
<ul>
<li><a href="#org988d7da">查找</a></li>
<li><a href="#orgf145dbd">过滤</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org009cdf8">操作DOM</a>
<ul>
<li><a href="#org618ce38">修改Text和HTML</a></li>
<li><a href="#orgb601322">修改CSS</a></li>
<li><a href="#org12df1a9">显示和隐藏DOM</a></li>
<li><a href="#org11dcc4c">获取DOM信息</a></li>
<li><a href="#org8b71996">操作表单</a></li>
<li><a href="#org857a9d1">修改DOM</a>
<ul>
<li><a href="#orga20f460">添加DOM</a></li>
<li><a href="#org03c67fb">删除节点</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgcb5270c">事件</a>
<ul>
<li><a href="#org644cd22">事件参数</a></li>
<li><a href="#org92c2cfa">取消绑定</a></li>
<li><a href="#orge57d516">事件触发条件</a></li>
</ul>
</li>
<li><a href="#orge8baaf6">动画</a>
<ul>
<li><a href="#org7a14949">show()/hide()</a></li>
<li><a href="#org489cedc">slideUp()/slideDown()</a></li>
<li><a href="#org654572f">fadeIn()/fadeOut()</a></li>
<li><a href="#orgd004a40">自定义动画</a></li>
<li><a href="#org683320b">串行动画</a></li>
</ul>
</li>
<li><a href="#org48d7192">AJAX</a>
<ul>
<li>
<ul>
<li><a href="#org28fd0a5">ajax</a></li>
</ul>
</li>
<li><a href="#org1f5cd68">get</a></li>
<li><a href="#org5013e0d">post</a></li>
<li><a href="#orgcc88f45">getJson</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org4342623" class="outline-2">
<h2 id="org4342623">声明</h2>
<div class="outline-text-2" id="text-org4342623">
<p>
学习自<a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/001434499993118b8173572625b4afe93a8b19dd707ea1d000">廖雪峰老师的JavaScript教程</a>
</p>
</div>
</div>

<div id="outline-container-org443ed66" class="outline-2">
<h2 id="org443ed66">概述</h2>
<div class="outline-text-2" id="text-org443ed66">
<p>
jQuery是JavaScript中使用最广泛的一个库. 使用jQuery的好处:
</p>

<ul class="org-ul">
<li>消除浏览器差异: 不需要自己写冗长的代码来针对不同的浏览器来绑定事件, 编写AJAX等代码;</li>
<li>简洁的操作DOM的方法: 写$('#test')肯定比document.getElementById('test')来得简洁;</li>
<li>轻松实现动画、修改CSS等各种操作.</li>
</ul>

<p>
可以从<a href="http://jquery.com/download/">jQuery官网下载</a>最新版本. 
</p>

<p>
使用jQuery只需要在页面的 <code>&lt;head&gt;</code> 引入jQuery文件即可:
</p>
<div class="org-src-container">
<pre class="src src-HTML">&lt;html&gt;
&lt;head&gt;
    &lt;script src="//code.jquery.com/jquery-1.11.3.min.js"&gt;&lt;/script&gt;
    ...
&lt;/head&gt;
&lt;body&gt;
    ...
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>

<p>
jQuery把所有功能全部封装在一个全局变量jQuery中, 而$也是一个合法的变量名, 它是变量jQuery的别名:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">window.jQuery; // jQuery(selector, context)
window.$; // jQuery(selector, context)
$ === jQuery; // true
typeof($); // 'function'
</pre>
</div>
<p>
<code>$</code> 本质就是一个函数, 但是函数也是对象, 所以 <code>$</code> 除了可以直接调用外, 也可以有很多其他属性.
</p>

<p>
有时候, 别的变量也被命名成了 <code>$</code> (一般不建议这么命名), 就可以使用 <code>.jQuery.noConflict()</code> 让原本作为jQuery别名的 <code>$</code> 无效.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$; // jQuery(selector, context)
jQuery.noConflict();
$; // undefined
jQuery; // jQuery(selector, context)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c393c3" class="outline-2">
<h2 id="org6c393c3">选择器</h2>
<div class="outline-text-2" id="text-org6c393c3">
<p>
选择器是jQuery的核心, 一个选择器写出来类似 <code>$('#dom-id')</code>.
</p>

<p>
jQuery使用选择器的原因是因为JavaScript的DOM操作中, 充斥着大量的 <code>getElementByXXX</code>, 不但写起来繁琐, 有时候定位到的节点还不止一个, 还要继续判断. 而jQuery的选择器可以帮我们 <code>快速定位</code> 到一个或多个节点.
</p>
</div>

<div id="outline-container-orgeb8b332" class="outline-3">
<h3 id="orgeb8b332">按ID查找</h3>
<div class="outline-text-3" id="text-orgeb8b332">
<div class="org-src-container">
<pre class="src src-JavaScript">// 查找&lt;div id="abc"&gt;:
var div = $('#abc');

// 返回的对象类似于: [&lt;div id="abc"&gt;...&lt;/div&gt;]

// jQuery对象和DOM对象可以互相转化
var divDom = div.get(0); // 假设存在div，获取第1个DOM元素
var another = $(divDom); // 重新把DOM包装为jQuery对象
</pre>
</div>
</div>
</div>

<div id="outline-container-org3c244e0" class="outline-3">
<h3 id="org3c244e0">按tag查找</h3>
<div class="outline-text-3" id="text-org3c244e0">
<div class="org-src-container">
<pre class="src src-JavaScript">var ps = $('p'); // 返回所有&lt;p&gt;节点
ps.length; // 数一数页面有多少个&lt;p&gt;节点
</pre>
</div>
</div>
</div>

<div id="outline-container-org5362f7a" class="outline-3">
<h3 id="org5362f7a">按class查找</h3>
<div class="outline-text-3" id="text-org5362f7a">
<p>
按class查找时, 在class名称前加一个 <code>.</code>:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var a = $('.red.green'); // 注意.与其他字符之间没有空格！
// 符合条件的节点：
// &lt;div class="red green"&gt;...&lt;/div&gt;
// &lt;div class="blue green red"&gt;...&lt;/div&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3793feb" class="outline-3">
<h3 id="org3793feb">按属性查找</h3>
<div class="outline-text-3" id="text-org3793feb">
<div class="org-src-container">
<pre class="src src-JavaScript">var email = $('[name=email]'); // 找出&lt;??? name="email"&gt;
var passwordInput = $('[type=password]'); // 找出&lt;??? type="password"&gt;
var a = $('[items="A B"]'); // 找出&lt;??? items="A B"&gt;
</pre>
</div>

<p>
按属性查找, 可以使用前缀查找或后缀查找:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var icons = $('[name^=icon]'); // 找出所有name属性值以icon开头的DOM
var names = $('[name$=with]'); // 找出所有name属性值以with结尾的DOM
</pre>
</div>
</div>
</div>

<div id="outline-container-orga5f8ae2" class="outline-3">
<h3 id="orga5f8ae2">组合查找</h3>
<div class="outline-text-3" id="text-orga5f8ae2">
<p>
如: 查找 <code>$('[name=email]')</code>, 可能会把表单外的name=email的标签也找出来, 如果只想查找 <code>&lt;input&gt;</code> 中的name属性为email的DOM, 则可以这么写:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var emailInput = $('input[name=email]'); // 不会找出&lt;div name="email"&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf43573f" class="outline-3">
<h3 id="orgf43573f">多项选择器</h3>
<div class="outline-text-3" id="text-orgf43573f">
<p>
把多个选择器用 <code>,</code> 组合起来一块选:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$('p,div'); // 把&lt;p&gt;和&lt;div&gt;都选出来
$('p.red,p.green'); // 把&lt;p class="red"&gt;和&lt;p class="green"&gt;都选出来
</pre>
</div>
</div>
</div>

<div id="outline-container-orga569438" class="outline-3">
<h3 id="orga569438">层级选择器</h3>
<div class="outline-text-3" id="text-orga569438">
<p>
如果两个DOM元素具有层级关系, 就可以用 <code>$('祖先 后代')</code> 的写法来选择, 层级之间用空格隔开. 如:
</p>
<div class="org-src-container">
<pre class="src src-HTML">&lt;!-- HTML结构 --&gt;
&lt;div class="testing"&gt;
    &lt;ul class="lang"&gt;
        &lt;li class="lang-javascript"&gt;JavaScript&lt;/li&gt;
        &lt;li class="lang-python"&gt;Python&lt;/li&gt;
        &lt;li class="lang-lua"&gt;Lua&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
</pre>
</div>

<p>
要选出JavaScript, 可以用层级选择器:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$('ul.lang li.lang-javascript'); // [&lt;li class="lang-javascript"&gt;JavaScript&lt;/li&gt;]
$('div.testing li.lang-javascript'); // [&lt;li class="lang-javascript"&gt;JavaScript&lt;/li&gt;]
</pre>
</div>
<p>
由于 <code>&lt;div&gt;</code> 和 <code>&lt;ul&gt;</code> 都是 <code>&lt;li&gt;</code> 的祖先节点, 所以这两种方式都可以选出相应的 <code>&lt;li&gt;</code> 节点.
</p>
</div>

<div id="outline-container-orgfa070e1" class="outline-4">
<h4 id="orgfa070e1">子选择器</h4>
<div class="outline-text-4" id="text-orgfa070e1">
<p>
与层级选择器类似, 但是限定了层级关系必须是父子关系. 写法为 <code>$('parent&gt;child')</code>.
</p>

<p>
以上面的HTML代码为例子:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$('ul.lang&gt;li.lang-javascript'); // 可以选出[&lt;li class="lang-javascript"&gt;JavaScript&lt;/li&gt;]
$('div.testing&gt;li.lang-javascript'); // [], 无法选出，因为&lt;div&gt;和&lt;li&gt;不构成父子关系
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbe95756" class="outline-4">
<h4 id="orgbe95756">过滤器</h4>
<div class="outline-text-4" id="text-orgbe95756">
<p>
不单独使用, 一般附加在选择器上, 更精确地定位元素. 效果如下:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$('ul.lang li'); // 选出JavaScript、Python和Lua 3个节点

$('ul.lang li:first-child'); // 仅选出JavaScript
$('ul.lang li:last-child'); // 仅选出Lua
$('ul.lang li:nth-child(2)'); // 选出第N个元素，N从1开始
$('ul.lang li:nth-child(even)'); // 选出序号为偶数的元素
$('ul.lang li:nth-child(odd)'); // 选出序号为奇数的元素
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org64aa4c9" class="outline-3">
<h3 id="org64aa4c9">查找和过滤</h3>
<div class="outline-text-3" id="text-org64aa4c9">
<p>
通过选择器, 我们一般就可以直接定位到想要的元素了. 另外, 我们也可以在拿到一个jQuery对象后, 以该对象为基准, 进行查找和过滤.
</p>
</div>

<div id="outline-container-org988d7da" class="outline-4">
<h4 id="org988d7da">查找</h4>
<div class="outline-text-4" id="text-org988d7da">
<p>
有如下HTML代码:
</p>
<div class="org-src-container">
<pre class="src src-HTML">&lt;!-- HTML结构 --&gt;
&lt;ul class="lang"&gt;
    &lt;li class="js dy"&gt;JavaScript&lt;/li&gt;
    &lt;li class="dy"&gt;Python&lt;/li&gt;
    &lt;li id="swift"&gt;Swift&lt;/li&gt;
    &lt;li class="dy"&gt;Scheme&lt;/li&gt;
    &lt;li name="haskell"&gt;Haskell&lt;/li&gt;
&lt;/ul&gt;
</pre>
</div>

<p>
通过 <code>find()</code> 查找:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var ul = $('ul.lang'); // 获得&lt;ul&gt;
var dy = ul.find('.dy'); // 获得JavaScript, Python, Scheme
var swf = ul.find('#swift'); // 获得Swift
var hsk = ul.find('[name=haskell]'); // 获得Haskell
</pre>
</div>

<p>
<code>parent()</code>: 从当前节点开始向上查找, 可带参数.
</p>

<p>
<code>next()</code>, <code>prev()</code>: 查找同一层级的节点, 可带参数.
</p>
</div>
</div>

<div id="outline-container-orgf145dbd" class="outline-4">
<h4 id="orgf145dbd">过滤</h4>
<div class="outline-text-4" id="text-orgf145dbd">
<p>
<code>filter()</code> 可以过滤掉不符合选择器条件的节点.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var langs = $('ul.lang li'); // 拿到JavaScript, Python, Swift, Scheme和Haskell
var a = langs.filter('.dy'); // 拿到JavaScript, Python, Scheme
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org009cdf8" class="outline-2">
<h2 id="org009cdf8">操作DOM</h2>
<div class="outline-text-2" id="text-org009cdf8">
<p>
使用选择器拿到jQuery对象后, 可以对相应的DOM节点进行操作.
</p>
</div>

<div id="outline-container-org618ce38" class="outline-3">
<h3 id="org618ce38">修改Text和HTML</h3>
<div class="outline-text-3" id="text-org618ce38">
<p>
<code>text()</code>: 获取节点的文本.
<code>html()</code>: 获取节点的原始HTML文本.
</p>

<p>
假设有如下HTML结构:
</p>
<div class="org-src-container">
<pre class="src src-HTML">&lt;!-- HTML结构 --&gt;
&lt;ul id="test-ul"&gt;
    &lt;li class="js"&gt;JavaScript&lt;/li&gt;
    &lt;li name="book"&gt;Java &amp;amp; JavaScript&lt;/li&gt;
&lt;/ul&gt;
</pre>
</div>

<p>
分别获取文本和HTML:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$('#test-ul li[name=book]').text(); // 'Java &amp; JavaScript'
$('#test-ul li[name=book]').html(); // 'Java &amp;amp; JavaScript'
</pre>
</div>

<p>
这两个方法如果没有参数, 就是获取信息, 如果有参数, 就是设置信息.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">j1.html('&lt;span style="color: red"&gt;JavaScript&lt;/span&gt;');
j2.text('JavaScript &amp; ECMAScript');
</pre>
</div>

<p>
一个jQuery对象可以包含0个或任意多个DOM对象, 它的方法会作用在对应的每个DOM节点上. 如:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$('#test-ul li').text('JS'); // 两个节点都变成了JS
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb601322" class="outline-3">
<h3 id="orgb601322">修改CSS</h3>
<div class="outline-text-3" id="text-orgb601322">
<p>
由于jQuery对象可以批量操作, 所以修改CSS时比较方便.
</p>

<p>
<code>css('name', 'value')</code>. 如: 
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$('#test-css li.dy&gt;span').css('background-color', '#ffd351').css('color', 'red');
</pre>
</div>

<p>
css('name'): 获取CSS属性
css('name', 'value'): 设置CSS属性
css('name', ''): 清除CSS属性
</p>
</div>
</div>

<div id="outline-container-org12df1a9" class="outline-3">
<h3 id="org12df1a9">显示和隐藏DOM</h3>
<div class="outline-text-3" id="text-org12df1a9">
<p>
<code>show()</code> 和 <code>hide()</code>.
</p>
</div>
</div>

<div id="outline-container-org11dcc4c" class="outline-3">
<h3 id="org11dcc4c">获取DOM信息</h3>
<div class="outline-text-3" id="text-org11dcc4c">
<div class="org-src-container">
<pre class="src src-JavaScript">// 浏览器可视窗口大小:
$(window).width(); // 800
$(window).height(); // 600

// HTML文档大小:
$(document).width(); // 800
$(document).height(); // 3500

// 某个div的大小:
var div = $('#test-div');
div.width(); // 600
div.height(); // 300
div.width(400); // 设置CSS属性 width: 400px，是否生效要看CSS是否有效
div.height('200px'); // 设置CSS属性 height: 200px，是否生效要看CSS是否有效
</pre>
</div>

<div class="org-src-container">
<pre class="src src-JavaScript">// &lt;div id="test-div" name="Test" start="1"&gt;...&lt;/div&gt;
var div = $('#test-div');
div.attr('data'); // undefined, 属性不存在
div.attr('name'); // 'Test'
div.attr('name', 'Hello'); // div的name属性变为'Hello'
div.removeAttr('name'); // 删除name属性
div.attr('name'); // undefined
</pre>
</div>
</div>
</div>

<div id="outline-container-org8b71996" class="outline-3">
<h3 id="org8b71996">操作表单</h3>
<div class="outline-text-3" id="text-org8b71996">
<p>
对于表单元素, jQuery对象统一提供 <code>val()</code> 方法获取和设置对应的 <code>value</code> 属性.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">/*
    &lt;input id="test-input" name="email" value=""&gt;
    &lt;select id="test-select" name="city"&gt;
        &lt;option value="BJ" selected&gt;Beijing&lt;/option&gt;
        &lt;option value="SH"&gt;Shanghai&lt;/option&gt;
        &lt;option value="SZ"&gt;Shenzhen&lt;/option&gt;
    &lt;/select&gt;
    &lt;textarea id="test-textarea"&gt;Hello&lt;/textarea&gt;
*/
var
    input = $('#test-input'),
    select = $('#test-select'),
    textarea = $('#test-textarea');

input.val(); // 'test'
input.val('abc@example.com'); // 文本框的内容已变为abc@example.com

select.val(); // 'BJ'
select.val('SH'); // 选择框已变为Shanghai

textarea.val(); // 'Hello'
textarea.val('Hi'); // 文本区域已更新为'Hi'
</pre>
</div>
</div>
</div>

<div id="outline-container-org857a9d1" class="outline-3">
<h3 id="org857a9d1">修改DOM</h3>
<div class="outline-text-3" id="text-org857a9d1">
</div>
<div id="outline-container-orga20f460" class="outline-4">
<h4 id="orga20f460">添加DOM</h4>
<div class="outline-text-4" id="text-orga20f460">
<p>
要添加新的DOM节点, 除了通过jQuery的 <code>html()</code> 这种暴力方法外, 还可以用 <code>append()</code>.
</p>

<p>
HTML结构:
</p>
<div class="org-src-container">
<pre class="src src-HTML">&lt;div id="test-div"&gt;
    &lt;ul&gt;
        &lt;li&gt;&lt;span&gt;JavaScript&lt;/span&gt;&lt;/li&gt;
        &lt;li&gt;&lt;span&gt;Python&lt;/span&gt;&lt;/li&gt;
        &lt;li&gt;&lt;span&gt;Swift&lt;/span&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
</pre>
</div>

<p>
向列表新增一个语言:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var ul = $('#test-div&gt;ul');  // 拿到ul节点
ul.append('&lt;li&gt;&lt;span&gt;Haskell&lt;/span&gt;&lt;/li&gt;');
</pre>
</div>

<p>
<code>append()</code> 把DOM添加到最后, <code>prepend()</code> 把DOM添加到最前.
</p>

<p>
对于同级节点, 可以使用 <code>after()</code> 或 <code>before()</code> 方法添加DOM.
</p>
</div>
</div>

<div id="outline-container-org03c67fb" class="outline-4">
<h4 id="org03c67fb">删除节点</h4>
<div class="outline-text-4" id="text-org03c67fb">
<p>
要删除DOM节点，拿到jQuery对象后直接调用 <code>remove()</code> 方法就可以了.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcb5270c" class="outline-2">
<h2 id="orgcb5270c">事件</h2>
<div class="outline-text-2" id="text-orgcb5270c">
<p>
因为JavaScript在浏览器中以单线程模式运行, 页面加载后, 一旦页面上所有的JavaScript代码被执行完后, 就只能依赖触发事件来执行JavaScript代码.
</p>

<p>
浏览器在接收到用户的鼠标或键盘输入后, 会自动在对应的DOM节点上触发相应的事件. 如果该节点已经绑定了对应的JavaScript处理函数, 该函数就会自动调用.
</p>

<p>
由于不同的浏览器绑定事件的代码都不太一样, 所以用jQuery来写代码, 就屏蔽了不同浏览器的差异, 我们总是编写相同的代码.
</p>

<p>
例子:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">/* HTML:
 *
 * &lt;a id="test-link" href="#0"&gt;点我试试&lt;/a&gt;
 *
 */

// 获取超链接的jQuery对象:
var a = $('#test-link');
a.on('click', function () {
    alert('Hello!');
});
</pre>
</div>

<p>
<code>on()</code> 方法用来绑定一个事件, 参数为事件名称和处理函数.
</p>

<p>
也可以写成(推荐这种写法):
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">a.click(function (){
    alert('Hello!');
});
</pre>
</div>

<p>
jQuery能够绑定的事件主要有:
</p>

<p>
<code>鼠标事件</code>:
click: 鼠标单击时触发；
dblclick：鼠标双击时触发；
mouseenter：鼠标进入时触发；
mouseleave：鼠标移出时触发；
mousemove：鼠标在DOM内部移动时触发；
hover：鼠标进入和退出时触发两个函数，相当于mouseenter加上mouseleave。
</p>

<p>
<code>键盘事件</code>:
keydown：键盘按下时触发；
keyup：键盘松开时触发；
keypress：按一次键后触发。
</p>

<p>
<code>其他事件</code>:
focus：当DOM获得焦点时触发；
blur：当DOM失去焦点时触发；
change：当&lt;input&gt;、&lt;select&gt;或&lt;textarea&gt;的内容改变时触发；
submit：当&lt;form&gt;提交时触发；
ready：当页面被载入并且DOM树完成初始化后触发。
</p>

<p>
其中, ready仅作用于document对象, 该事件在DOM完成初始化后触发, 且只触发一次,  非常常用.
</p>

<p>
如果想给&lt;form&gt;表单绑定submit事件, 先看一个错误写法:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">&lt;html&gt;
&lt;head&gt;
    &lt;script&gt;
        // 代码有误:
        $('#testForm).on('submit', function () {
            alert('submit!');
        });
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form id="testForm"&gt;
        ...
    &lt;/form&gt;
&lt;/body&gt;
</pre>
</div>
<p>
错误原因是JavaScript在执行的时候, &lt;form&gt;尚未载入浏览器, 所以 <code>$('#testForm')</code> 返回 <code>[]</code>, 并没有绑定事件到任何DOM上.
</p>

<p>
正确的做法是把自己的初始化代码放到document对象的ready事件中, 保证DOM已完成初始化.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">&lt;html&gt;
&lt;head&gt;
    &lt;script&gt;
        $(document).on('ready', function () {
            $('#testForm).on('submit', function () {
                alert('submit!');
            });
        });
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form id="testForm"&gt;
        ...
    &lt;/form&gt;
&lt;/body&gt;
</pre>
</div>

<p>
由于ready事件非常普遍, 可以简化成:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$(function () {
    // init...
});
</pre>
</div>
</div>

<div id="outline-container-org644cd22" class="outline-3">
<h3 id="org644cd22">事件参数</h3>
<div class="outline-text-3" id="text-org644cd22">
<p>
有些事件, 如mousemove和keypress, 我们需要获取鼠标位置和按键的值, 否则监听这些事件就没什么意义了. 所有事件都会传入Event对象作为参数, 可以从Event对象上获取到更多的信息:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">$(function () {
    $('#testMouseMoveDiv').mousemove(function (e) {
        $('#testMouseMoveSpan').text('pageX = ' + e.pageX + ', pageY = ' + e.pageY);
    });
});
</pre>
</div>
</div>
</div>

<div id="outline-container-org92c2cfa" class="outline-3">
<h3 id="org92c2cfa">取消绑定</h3>
<div class="outline-text-3" id="text-org92c2cfa">
<p>
通过 <code>off('click', function)</code> 实现.
</p>

<div class="org-src-container">
<pre class="src src-JavaScript">function hello() {
    alert('hello!');
}

a.click(hello); // 绑定事件

// 10秒钟后解除绑定:
setTimeout(function () {
    a.off('click', hello);
}, 10000);
</pre>
</div>
</div>
</div>

<div id="outline-container-orge57d516" class="outline-3">
<h3 id="orge57d516">事件触发条件</h3>
<div class="outline-text-3" id="text-orge57d516">
<p>
事件的触发问题由用户操作引起的. 如监控文本框的内容改动:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var input = $('#test-input');
input.change(function () {
    console.log('changed...');
});
</pre>
</div>
<p>
当用户在文本框中输入时, 就会触发change事件. 但是, 如果用JavaScript代码去改动文本框的值, 将不会触发change事件. 如果要用代码触发change事件, 可以直接调用无参数的change()来触发该事件.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var input = $('#test-input');
input.val('change it!');
input.change(); // 触发change事件
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge8baaf6" class="outline-2">
<h2 id="orge8baaf6">动画</h2>
<div class="outline-text-2" id="text-orge8baaf6">
<p>
用JavaScript实现动画, 原理非常简单: 我们只需要以固定的时间间隔(例如0.1秒), 每次把DOM元素的CSS样式修改一点(例如高宽各增加10%), 看起来就像动画了.
</p>

<p>
但是要用JavaScript手动实现动画效果, 需要编写非常复杂的代码. 如果想要把动画效果用函数封装起来便于复用, 那考虑的事情就更多了.
</p>

<p>
使用jQuery实现动画, 代码已经简单得不能再简化了: 只需要一行代码!
</p>
</div>

<div id="outline-container-org7a14949" class="outline-3">
<h3 id="org7a14949">show()/hide()</h3>
<div class="outline-text-3" id="text-org7a14949">
<p>
直接以无参数形式调用show()和hide(), 会显示和隐藏DOM元素. 但是, 只要传递一个时间参数进去, 就变成了动画:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var div = $('#test-show-hide');
div.hide(3000); // 在3秒钟内逐渐消失
</pre>
</div>
</div>
</div>

<div id="outline-container-org489cedc" class="outline-3">
<h3 id="org489cedc">slideUp()/slideDown()</h3>
<div class="outline-text-3" id="text-org489cedc">
<p>
show()和hide()是从左上角逐渐展开或收缩的, 而slideUp()和slideDown()则是在垂直方向逐渐展开或收缩的.
</p>
</div>
</div>

<div id="outline-container-org654572f" class="outline-3">
<h3 id="org654572f">fadeIn()/fadeOut()</h3>
<div class="outline-text-3" id="text-org654572f">
<p>
淡入淡出.
</p>
</div>
</div>

<div id="outline-container-orgd004a40" class="outline-3">
<h3 id="orgd004a40">自定义动画</h3>
<div class="outline-text-3" id="text-orgd004a40">
<p>
<code>animate()</code>: 它可以实现任意动画效果, 我们需要传入的参数就是DOM元素最终的CSS状态和时间, jQuery在时间段内不断调整CSS直到达到我们设定的值.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var div = $('#test-animate');
div.animate({
    opacity: 0.25,
    width: '256px',
    height: '256px'
}, 3000); // 在3秒钟内CSS过渡到设定值
</pre>
</div>

<p>
<code>animate()</code> 还可以再传入一个函数作为参数, 当动画结束时, 该函数被调用.
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var div = $('#test-animate');
div.animate({
    opacity: 0.25,
    width: '256px',
    height: '256px'
}, 3000, function () {
    console.log('动画已结束');
    // 恢复至初始状态:
    $(this).css('opacity', '1.0').css('width', '128px').css('height', '128px');
});
</pre>
</div>
</div>
</div>

<div id="outline-container-org683320b" class="outline-3">
<h3 id="org683320b">串行动画</h3>
<div class="outline-text-3" id="text-org683320b">
<p>
jQuery的动画效果还可以串行执行, 通过delay()方法还可以实现暂停, 这样, 我们可以实现更复杂的动画效果, 而代码却相当简单:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var div = $('#test-animates');
// 动画效果：slideDown - 暂停 - 放大 - 暂停 - 缩小
div.slideDown(2000)
   .delay(1000)
   .animate({
       width: '256px',
       height: '256px'
   }, 2000)
   .delay(1000)
   .animate({
       width: '128px',
       height: '128px'
   }, 2000);
}
&lt;/script&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org48d7192" class="outline-2">
<h2 id="org48d7192">AJAX</h2>
<div class="outline-text-2" id="text-org48d7192">
<p>
用jQuery的相关对象来处理AJAX, 可以不需要考虑浏览器的问题, 代码也能大大简化.
</p>
</div>

<div id="outline-container-org28fd0a5" class="outline-4">
<h4 id="org28fd0a5">ajax</h4>
<div class="outline-text-4" id="text-org28fd0a5">
<p>
jQuery在全局对象jQuery(即\()绑定了 =ajax()= 函数, 可以处理AJAX请求. 写法为: =\).ajax(url, settings)=, 其中, <code>settings</code> 是可选的, 有如下选项:
</p>
<ul class="org-ul">
<li>async: 是否异步执行AJAX请求, 默认为true, 千万不要指定为false;</li>
<li>method: 发送的Method, 缺省为'GET', 可指定为'POST'、'PUT'等;</li>
<li>contentType: 发送POST请求的格式, 默认值为'application/x-www-form-urlencoded; charset=UTF-8', 也可以指定为text/plain、application/json;</li>
<li>data: 发送的数据, 可以是字符串、数组或object. 如果是GET请求, data将被转换成query附加到URL上, 如果是POST请求, 根据contentType把data序列化成合适的格式;</li>
<li>headers: 发送的额外的HTTP头, 必须是一个object;</li>
<li>dataType: 接收的数据格式, 可以指定为'html'、'xml'、'json'、'text'等, 缺省情况下根据响应的Content-Type猜测.</li>
</ul>

<p>
如发送一个GET请求, 返回一个JSON格式的数据:
</p>
<pre class="example">
var jqxhr = $.ajax('/api/categories', {
    dataType: 'json'
});
// 请求已经发送了
</pre>

<p>
处理返回的数据的方法:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var jqxhr = $.ajax('/api/categories', {
    dataType: 'json'
}).done(function (data) {
    ajaxLog('成功, 收到的数据: ' + JSON.stringify(data));
}).fail(function (xhr, status) {
    ajaxLog('失败: ' + xhr.status + ', 原因: ' + status);
}).always(function () {
    ajaxLog('请求完成: 无论成功或失败都会调用');
});
</pre>
</div>

<p>
对于常用的AJAX操作, jQuery提供了一些辅助方法.
</p>
</div>
</div>

<div id="outline-container-org1f5cd68" class="outline-3">
<h3 id="org1f5cd68">get</h3>
<div class="outline-text-3" id="text-org1f5cd68">
<div class="org-src-container">
<pre class="src src-JavaScript">var jqxhr = $.get('/path/to/resource', {
    name: 'Bob Lee',
    check: 1
});
</pre>
</div>
</div>
</div>

<div id="outline-container-org5013e0d" class="outline-3">
<h3 id="org5013e0d">post</h3>
<div class="outline-text-3" id="text-org5013e0d">
<div class="org-src-container">
<pre class="src src-JavaScript">var jqxhr = $.post('/path/to/resource', {
    name: 'Bob Lee',
    check: 1
});
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc88f45" class="outline-3">
<h3 id="orgcc88f45">getJson</h3>
<div class="outline-text-3" id="text-orgcc88f45">
<p>
由于JSON用得越来越普遍, 所以jQuery也提供了getJSON()方法来快速通过GET获取一个JSON对象:
</p>
<div class="org-src-container">
<pre class="src src-JavaScript">var jqxhr = $.getJSON('/path/to/resource', {
    name: 'Bob Lee',
    check: 1
}).done(function (data) {
    // data已经被解析为JSON对象了
});
</pre>
</div>
</div>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2018-03-20</span>
        <span title="last modification date" class="post-info">2018-03-20</span>
        <span title="tags" class="post-info"><a href="/tags/web/">Web</a></span>
        <span title="author" class="post-info">Pinvon</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2018/03/20/jquery";
          var disqus_url = "http://pinvondev.github.io/blog/2018/03/20/jquery";
          var disqus_shortname = 'pinvon';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
       <div id="hashover"></div>
       <script type="text/javascript" src="/hashover.php"></script>
       <noscript>You must have JavaScript enabled to use the comments.</noscript>
      </section>
      <script src="//code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.x (<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:pinvon &lt;at&gt; Inspiron">Pinvon</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
